# 🚀 Waller 開発計画書

---

## 📌 プロジェクト概要

### プロジェクト名
Waller（仮） - ウォールトランポリン特化型動画SNS

### 開発方式
AI駆動開発（Claude + Cursor/GitHub Copilot）

### 技術スタック
- **フロントエンド**: React Native (Expo SDK 51+)
- **バックエンド**: Supabase (PostgreSQL + Auth + Storage)
- **言語**: TypeScript

### 開発期間（目安）
- **Phase 0（MVP）**: 4-6週間
- **Phase 1（発見性強化）**: 2-3週間
- **Phase 2（コミュニケーション）**: 3-4週間

---

## 🎯 Phase 0（MVP）の目標

### 完成定義（Definition of Done）
- ✅ プレーヤーが動画付き投稿を完了できる
- ✅ ファンがリアクション（いいね・スタンプ）できる
- ✅ 投稿が新着順で閲覧できる
- ✅ いいね履歴が自分専用で閲覧可能
- ✅ 通報機能が動作する（3人通報で自動非表示）
- ✅ 投稿編集・削除が仕様通りに動作する
- ✅ すべての主要エラーケースで適切な案内が表示される

### 成功指標（KPI）
- 週投稿者数: 8人以上
- 平均リアクション率: 25%以上
- 7日再訪率: 35%以上

---

## 📅 開発フェーズ

### Phase 0: MVP開発（現在のフェーズ）

#### Sprint 1: 基盤構築（1-2週間）
**目標**: 開発環境構築 + 認証 + データベース

**成果物**:
- ✅ Expoプロジェクト作成
- ✅ Supabase設定完了
- ✅ データベース構築（全テーブル + RLS）
- ✅ 認証フロー実装（Google/Apple）
- ✅ プロフィール登録画面

**完了条件**:
- ユーザーがログインしてプロフィールを作成できる
- Supabase接続が正常に動作する

---

#### Sprint 2: コア機能実装（2-3週間）
**目標**: 投稿・フィード・リアクション

**成果物**:
- ✅ 動画投稿機能（選択・アップロード・投稿）
- ✅ ホームフィード画面
- ✅ 投稿カードコンポーネント
- ✅ 動画再生機能
- ✅ いいね機能
- ✅ スタンプ機能（🔥👏✨💪）
- ✅ プロフィール画面

**完了条件**:
- プレーヤーが動画を投稿できる
- ファンがフィードを見てリアクションできる
- リアクション数がリアルタイムで更新される

---

#### Sprint 3: サブ機能 + 仕上げ（1-2週間）
**目標**: 編集・削除・通報・いいね履歴・エラーハンドリング

**成果物**:
- ✅ 投稿編集機能
- ✅ 投稿削除機能（制限付き）
- ✅ 通報機能
- ✅ いいね履歴画面
- ✅ プロフィール編集画面
- ✅ 設定画面
- ✅ エラーハンドリング実装
- ✅ ローディング・空状態の実装
- ✅ バリデーション実装

**完了条件**:
- すべてのMVP機能が動作する
- エラーが適切に処理される
- UXが滑らか

---

#### Sprint 4: テスト + デプロイ準備（1週間）
**目標**: バグ修正 + 最適化 + 初回ビルド

**成果物**:
- ✅ 手動テスト完了
- ✅ バグ修正
- ✅ パフォーマンス最適化
- ✅ サンプルデータ作成
- ✅ TestFlight/内部テスト配布

**完了条件**:
- 主要フローが正常動作
- クラッシュなし
- 内部テストユーザーに配布可能

---

## 🏗️ 開発の進め方（AI駆動開発）

### 基本プロセス
```
1. タスク選択
   ↓
2. AIに要求（Claude/Copilot）
   - 「phase0_tasks.md の Task 1.1 を実装してください」
   ↓
3. コード生成・レビュー
   ↓
4. 動作確認
   ↓
5. タスク完了チェック
   ↓
6. 次のタスクへ
```

### AIへの指示の仕方（推奨）
```
良い指示例:
「phase0_tasks.md の Task 2.3 を実装してください。
実装ガイド（implementation_guide.md）のパターンに従い、
技術設計書のデータベーススキーマを参照してください。」

悪い指示例:
「ログイン画面を作って」
```

### ドキュメントの参照順序
1. **タスク**: `phase0_tasks.md` で何をするか確認
2. **仕様**: `requirements_v0.4.md` で要件確認
3. **技術**: `tech_design.md` でDB・API確認
4. **画面**: `screen_design.md` でUI確認
5. **実装**: `implementation_guide.md` でコーディングパターン確認

---

## 📂 プロジェクト構造

```
waller/
├── docs/                          # ドキュメント
│   ├── requirements_v0.4.md       # 要件定義書
│   ├── tech_design.md             # 技術設計書
│   ├── screen_design.md           # 画面設計書
│   ├── dev_plan.md                # 開発計画書（このファイル）
│   ├── phase0_tasks.md            # MVPタスク一覧
│   └── implementation_guide.md    # 実装ガイド
│
├── src/                           # ソースコード
│   ├── screens/                   # 画面コンポーネント
│   ├── components/                # 共通コンポーネント
│   ├── hooks/                     # カスタムフック
│   ├── services/                  # API層
│   ├── stores/                    # グローバル状態
│   ├── types/                     # 型定義
│   └── utils/                     # ユーティリティ
│
├── supabase/                      # Supabase関連
│   ├── migrations/                # DBマイグレーション
│   └── seed.sql                   # 初期データ
│
└── app.json                       # Expo設定
```

---

## ⚠️ 開発時の注意事項

### 優先順位の原則
1. **動作すること** > 綺麗なコード
2. **MVPスコープ内** > 追加機能
3. **エラーハンドリング** > 新機能

### やってはいけないこと
- ❌ MVPに含まれない機能の実装（コメント、フォロー、画像投稿等）
- ❌ 過度な最適化（動作確認前）
- ❌ タスクの飛ばし（依存関係を無視）
- ❌ ドキュメントを読まずに実装

### やるべきこと
- ✅ タスクを1つずつ完了させる
- ✅ 動作確認を頻繁に行う
- ✅ エラーが出たらすぐに対処
- ✅ コミットを細かく行う
- ✅ AIに明確な指示を出す

---

## 🧪 テスト戦略

### 手動テストの重点項目
1. **認証フロー**: ログイン → プロフィール登録 → ホーム遷移
2. **投稿フロー**: 動画選択 → プレビュー → 投稿 → フィード表示
3. **リアクション**: いいね・スタンプの追加/削除/変更
4. **エラー処理**: オフライン、サイズ超過、ネットワークエラー
5. **削除制限**: 10分以内/以降の削除制限
6. **通報**: 3人通報での自動非表示

### テスト端末
- **iOS**: iPhone 12以上（推奨）
- **Android**: Pixel 6以上（推奨）

---

## 📊 進捗管理

### 進捗の記録方法
`phase0_tasks.md` のチェックボックスを更新：
```markdown
- [x] Task 1.1: Expoプロジェクト作成
- [x] Task 1.2: Supabase設定
- [ ] Task 1.3: データベース構築
```

### 週次レビュー（推奨）
毎週末に以下を確認：
- ✅ 完了したタスク数
- ✅ 残タスク数と想定工数
- ✅ ブロッカーの有無
- ✅ 次週の目標設定

---

## 🚀 デプロイ計画

### 開発環境
- **Expo Go**: 開発中の動作確認
- **Development Build**: ネイティブ機能テスト

### ステージング環境
- **TestFlight** (iOS): 内部テスター向け
- **Internal Testing** (Android): 内部テスター向け

### 本番環境
- **App Store** (iOS): Phase 0 完成後
- **Google Play** (Android): Phase 0 完成後

---

## 📈 Phase 1以降の展望

### Phase 1: 発見性強化（2-3週間）
- タグ検索機能
- カテゴリフィルタ
- 通知機能（軽量版）
- プレイサマリー

### Phase 2: コミュニケーション解禁（3-4週間）
- コメント機能（制限付き）
- フォロー機能
- 画像投稿（1-5枚）
- ファン投稿（画像のみ、承認型β）

### Phase 3: エンゲージメント強化（4-6週間）
- フォロー中フィード
- チャレンジ機能
- スタンプ拡張（有償含む）
- チーム/ジムページ

---

## 📝 変更履歴

| 日付 | バージョン | 変更内容 |
|---|---|---|
| 2025-10-21 | v1.0 | 初版作成 |

---

**次のステップ**: `phase0_tasks.md` を参照して開発開始